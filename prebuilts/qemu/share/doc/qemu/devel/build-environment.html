<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Setup build environment &mdash; QEMU  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/qemu_32x32.png"/>
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="QEMU and Kconfig" href="kconfig.html" />
    <link rel="prev" title="The QEMU build system architecture" href="build-system.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #802400" >
            <a href="../index.html" class="icon icon-home"> QEMU
            <img src="../_static/qemu_128x128.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                10.0.50
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About QEMU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system/index.html">System Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Mode Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interop/index.html">System Emulation Management and Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">System Emulation Guest Hardware Specifications</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Information</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index-process.html">QEMU Community Processes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index-build.html">QEMU Build System</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="build-system.html">The QEMU build system architecture</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Setup build environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">MacOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="kconfig.html">QEMU and Kconfig</a></li>
<li class="toctree-l3"><a class="reference internal" href="docs.html">QEMU Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="qapi-code-gen.html">How to use the QAPI code generator</a></li>
<li class="toctree-l3"><a class="reference internal" href="qapi-domain.html">The Sphinx QAPI Domain</a></li>
<li class="toctree-l3"><a class="reference internal" href="control-flow-integrity.html">Control-Flow Integrity (CFI)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="testing/index.html">Testing QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-api.html">Internal QEMU APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-internals.html">Internal Subsystem Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="index-tcg.html">TCG Emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="codebase.html">Codebase</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #802400" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QEMU</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Developer Information</a> &raquo;</li>
          <li><a href="index-build.html">QEMU Build System</a> &raquo;</li>
      <li>Setup build environment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="https://gitlab.com/qemu-project/qemu/-/blob/master/docs/devel/build-environment.rst">View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="setup-build-environment">
<span id="setup-build-env"></span><h1>Setup build environment<a class="headerlink" href="#setup-build-environment" title="Permalink to this headline"></a></h1>
<p>QEMU uses a lot of dependencies on the host system. glib2 is used everywhere in
the code base, and most of the other dependencies are optional.</p>
<p>We present here simple instructions to enable native builds on most popular
systems.</p>
<p>You can find additional instructions on <a class="reference external" href="https://wiki.qemu.org/">QEMU wiki</a>:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.qemu.org/Hosts/Linux">Linux</a></p></li>
<li><p><a class="reference external" href="https://wiki.qemu.org/Hosts/Mac">MacOS</a></p></li>
<li><p><a class="reference external" href="https://wiki.qemu.org/Hosts/W32">Windows</a></p></li>
<li><p><a class="reference external" href="https://wiki.qemu.org/Hosts/BSD">BSD</a></p></li>
</ul>
<p>Note: Installing dependencies using your package manager build dependencies may
miss out on deps that have been newly introduced in qemu.git. In more, it misses
deps the distribution has decided to exclude.</p>
<section id="id1">
<h2>Linux<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h2>
<section id="fedora">
<h3>Fedora<a class="headerlink" href="#fedora" title="Permalink to this headline"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">dnf</span> <span class="n">builddep</span> <span class="n">qemu</span>
</pre></div>
</div>
</section>
<section id="debian-ubuntu">
<h3>Debian/Ubuntu<a class="headerlink" href="#debian-ubuntu" title="Permalink to this headline"></a></h3>
<p>You first need to enable <a class="reference external" href="https://wiki.debian.org/SourcesList">Sources List</a>.
Then, use apt to install dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span> <span class="n">build</span><span class="o">-</span><span class="n">dep</span> <span class="n">qemu</span>
</pre></div>
</div>
</section>
</section>
<section id="id2">
<h2>MacOS<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h2>
<p>You first need to install <a class="reference external" href="https://brew.sh/">Homebrew</a>. Then, use it to
install dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>brew update &amp;&amp; brew install $(brew deps --include-build qemu)
</pre></div>
</div>
</section>
<section id="id3">
<h2>Windows<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h2>
<p>You first need to install <a class="reference external" href="https://www.msys2.org/">MSYS2</a>.
MSYS2 offers <a class="reference external" href="https://www.msys2.org/docs/environments/">different environments</a>.
x86_64 environments are based on GCC, while aarch64 is based on Clang.</p>
<p>We recommend to use MINGW64 for windows-x86_64 and CLANGARM64 for windows-aarch64
(only available on windows-aarch64 hosts).</p>
<p>Then, you can open a windows shell, and enter msys2 env using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">:</span><span class="o">/</span><span class="n">msys64</span><span class="o">/</span><span class="n">msys2_shell</span><span class="o">.</span><span class="n">cmd</span> <span class="o">-</span><span class="n">defterm</span> <span class="o">-</span><span class="n">here</span> <span class="o">-</span><span class="n">no</span><span class="o">-</span><span class="n">start</span> <span class="o">-</span><span class="n">mingw64</span>
<span class="c1"># Replace -ucrt64 by -clangarm64 or -ucrt64 for other environments.</span>
</pre></div>
</div>
<p>MSYS2 package manager does not offer a built-in way to install build
dependencies. You can start with this list of packages using pacman:</p>
<p>Note: Dependencies need to be installed again if you use a different MSYS2
environment.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># update MSYS2 itself, you need to reopen your shell at the end.
pacman -Syu
pacman -S \
    base-devel binutils bison diffutils flex git grep make sed \
    ${MINGW_PACKAGE_PREFIX}-toolchain \
    ${MINGW_PACKAGE_PREFIX}-glib2 \
    ${MINGW_PACKAGE_PREFIX}-gtk3 \
    ${MINGW_PACKAGE_PREFIX}-libnfs \
    ${MINGW_PACKAGE_PREFIX}-libssh \
    ${MINGW_PACKAGE_PREFIX}-ninja \
    ${MINGW_PACKAGE_PREFIX}-pixman \
    ${MINGW_PACKAGE_PREFIX}-pkgconf \
    ${MINGW_PACKAGE_PREFIX}-python \
    ${MINGW_PACKAGE_PREFIX}-SDL2 \
    ${MINGW_PACKAGE_PREFIX}-zstd
</pre></div>
</div>
<p>If you want to install all dependencies, it’s possible to use recipe used to
build QEMU in MSYS2 itself.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pacman</span> <span class="o">-</span><span class="n">S</span> <span class="n">wget</span> <span class="n">base</span><span class="o">-</span><span class="n">devel</span> <span class="n">git</span>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">msys2</span><span class="o">/</span><span class="n">MINGW</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">mingw</span><span class="o">-</span><span class="n">w64</span><span class="o">-</span><span class="n">qemu</span><span class="o">/</span><span class="n">PKGBUILD</span>
<span class="c1"># Some packages may be missing for your environment, installation will still</span>
<span class="c1"># be done though.</span>
<span class="n">makepkg</span> <span class="o">--</span><span class="n">syncdeps</span> <span class="o">--</span><span class="n">nobuild</span> <span class="n">PKGBUILD</span> <span class="o">||</span> <span class="n">true</span>
</pre></div>
</div>
<section id="build-on-windows-aarch64">
<h3>Build on windows-aarch64<a class="headerlink" href="#build-on-windows-aarch64" title="Permalink to this headline"></a></h3>
<p>When trying to cross compile meson for x86_64 using UCRT64 or MINGW64 env,
configure will run into an error because the cpu detected is not correct.</p>
<p>Meson detects x86_64 processes emulated, so you need to manually set the cpu,
and force a cross compilation (with empty prefix).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">cpu</span><span class="o">=</span><span class="n">x86_64</span> <span class="o">--</span><span class="n">cross</span><span class="o">-</span><span class="n">prefix</span><span class="o">=</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="build-system.html" class="btn btn-neutral float-left" title="The QEMU build system architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="kconfig.html" class="btn btn-neutral float-right" title="QEMU and Kconfig" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The QEMU Project Developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<!-- Empty para to force a blank line after "Built with Sphinx ..." -->
<p></p>

<p>This documentation is for QEMU version 10.0.50.</p>


<p><a href="../about/license.html">QEMU and this manual are released under the
GNU General Public License, version 2.</a></p>

 


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>