<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aspeed family boards (ast2500-evb, ast2600-evb, ast2700-evb, bletchley-bmc, fuji-bmc, fby35-bmc, fp5280g2-bmc, g220a-bmc, palmetto-bmc, qcom-dc-scm-v1-bmc, qcom-firework-bmc, quanta-q71l-bmc, rainier-bmc, romulus-bmc, sonorapass-bmc, supermicrox11-bmc, supermicrox11spi-bmc, tiogapass-bmc, witherspoon-bmc, yosemitev2-bmc) &mdash; QEMU  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/qemu_32x32.png"/>
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/custom.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Banana Pi BPI-M2U (bpim2u)" href="bananapi_m2u.html" />
    <link rel="prev" title="Arm Versatile Express boards (vexpress-a9, vexpress-a15)" href="vexpress.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #802400" >
            <a href="../../index.html" class="icon icon-home"> QEMU
            <img src="../../_static/qemu_128x128.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                10.0.50
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About QEMU</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">System Emulation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../invocation.html">Invocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device-emulation.html">Device Emulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keys.html">Keys in the graphical frontends</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mux-chardev.html">Keys in the character backend multiplexer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../monitor.html">QEMU Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../images.html">Disk Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../virtio-net-failover.html">QEMU virtio-net standby (net_failover)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../linuxboot.html">Direct Linux Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generic-loader.html">Generic Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guest-loader.html">Guest Loader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../barrier.html">QEMU Barrier Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vnc-security.html">VNC security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tls.html">TLS setup for network services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../secrets.html">Providing secret data to QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../authz.html">Client authorization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gdb.html">GDB usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../replay.html">Record/replay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../managed-startup.html">Managed start up options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootindex.html">Managing device boot order with bootindex properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpu-hotplug.html">Virtual CPU hotplug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pr-manager.html">Persistent reservation managers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../targets.html">QEMU System Emulator Targets</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../target-arm.html">Arm System emulator</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../target-arm.html#choosing-a-board-model">Choosing a board model</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../target-arm.html#board-specific-documentation">Board-specific documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../target-arm.html#emulated-cpu-architecture-support">Emulated CPU architecture support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../target-arm.html#arm-cpu-features">Arm CPU features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../target-avr.html">AVR System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-loongarch.html">LoongArch System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-m68k.html">ColdFire System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-mips.html">MIPS System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-ppc.html">PowerPC System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-openrisc.html">OpenRISC System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-riscv.html">RISC-V System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-rx.html">RX System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-s390x.html">s390x System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-sparc.html">Sparc32 System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-sparc64.html">Sparc64 System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-i386.html">x86 System emulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target-xtensa.html">Xtensa System emulator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multi-process.html">Multi-process QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../confidential-guest-support.html">Confidential Guest Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vm-templating.html">QEMU VM templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sriov.html">Compsable SR-IOV device</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Mode Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../interop/index.html">System Emulation Management and Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../specs/index.html">System Emulation Guest Hardware Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devel/index.html">Developer Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #802400" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QEMU</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">System Emulation</a> &raquo;</li>
          <li><a href="../targets.html">QEMU System Emulator Targets</a> &raquo;</li>
          <li><a href="../target-arm.html">Arm System emulator</a> &raquo;</li>
      <li>Aspeed family boards (<code class="docutils literal notranslate"><span class="pre">ast2500-evb</span></code>, <code class="docutils literal notranslate"><span class="pre">ast2600-evb</span></code>, <code class="docutils literal notranslate"><span class="pre">ast2700-evb</span></code>, <code class="docutils literal notranslate"><span class="pre">bletchley-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">fuji-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">fby35-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">fp5280g2-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">g220a-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">palmetto-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">qcom-dc-scm-v1-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">qcom-firework-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">quanta-q71l-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">rainier-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">romulus-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">sonorapass-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">supermicrox11-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">supermicrox11spi-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">tiogapass-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">witherspoon-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">yosemitev2-bmc</span></code>)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="https://gitlab.com/qemu-project/qemu/-/blob/master/docs/system/arm/aspeed.rst">View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="aspeed-family-boards-ast2500-evb-ast2600-evb-ast2700-evb-bletchley-bmc-fuji-bmc-fby35-bmc-fp5280g2-bmc-g220a-bmc-palmetto-bmc-qcom-dc-scm-v1-bmc-qcom-firework-bmc-quanta-q71l-bmc-rainier-bmc-romulus-bmc-sonorapass-bmc-supermicrox11-bmc-supermicrox11spi-bmc-tiogapass-bmc-witherspoon-bmc-yosemitev2-bmc">
<h1>Aspeed family boards (<code class="docutils literal notranslate"><span class="pre">ast2500-evb</span></code>, <code class="docutils literal notranslate"><span class="pre">ast2600-evb</span></code>, <code class="docutils literal notranslate"><span class="pre">ast2700-evb</span></code>, <code class="docutils literal notranslate"><span class="pre">bletchley-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">fuji-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">fby35-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">fp5280g2-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">g220a-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">palmetto-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">qcom-dc-scm-v1-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">qcom-firework-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">quanta-q71l-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">rainier-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">romulus-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">sonorapass-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">supermicrox11-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">supermicrox11spi-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">tiogapass-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">witherspoon-bmc</span></code>, <code class="docutils literal notranslate"><span class="pre">yosemitev2-bmc</span></code>)<a class="headerlink" href="#aspeed-family-boards-ast2500-evb-ast2600-evb-ast2700-evb-bletchley-bmc-fuji-bmc-fby35-bmc-fp5280g2-bmc-g220a-bmc-palmetto-bmc-qcom-dc-scm-v1-bmc-qcom-firework-bmc-quanta-q71l-bmc-rainier-bmc-romulus-bmc-sonorapass-bmc-supermicrox11-bmc-supermicrox11spi-bmc-tiogapass-bmc-witherspoon-bmc-yosemitev2-bmc" title="Permalink to this headline"></a></h1>
<p>The QEMU Aspeed machines model BMCs of various OpenPOWER systems and
Aspeed evaluation boards. They are based on different releases of the
Aspeed SoC : the AST2400 integrating an ARM926EJ-S CPU (400MHz), the
AST2500 with an ARM1176JZS CPU (800MHz), the AST2600
with dual cores ARM Cortex-A7 CPUs (1.2GHz).</p>
<p>The SoC comes with RAM, Gigabit ethernet, USB, SD/MMC, USB, SPI, I2C,
etc.</p>
<p>AST2400 SoC based machines :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">palmetto-bmc</span></code>         OpenPOWER Palmetto POWER8 BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quanta-q71l-bmc</span></code>      OpenBMC Quanta BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">supermicrox11-bmc</span></code>    Supermicro X11 BMC (ARM926EJ-S)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">supermicrox11spi-bmc</span></code>    Supermicro X11 SPI BMC (ARM1176)</p></li>
</ul>
<p>AST2500 SoC based machines :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ast2500-evb</span></code>          Aspeed AST2500 Evaluation board</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">romulus-bmc</span></code>          OpenPOWER Romulus POWER9 BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">witherspoon-bmc</span></code>      OpenPOWER Witherspoon POWER9 BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sonorapass-bmc</span></code>       OCP SonoraPass BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fp5280g2-bmc</span></code>         Inspur FP5280G2 BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">g220a-bmc</span></code>            Bytedance G220A BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yosemitev2-bmc</span></code>       Facebook YosemiteV2 BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tiogapass-bmc</span></code>        Facebook Tiogapass BMC</p></li>
</ul>
<p>AST2600 SoC based machines :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ast2600-evb</span></code>          Aspeed AST2600 Evaluation board (Cortex-A7)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rainier-bmc</span></code>          IBM Rainier POWER10 BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fuji-bmc</span></code>             Facebook Fuji BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bletchley-bmc</span></code>        Facebook Bletchley BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fby35-bmc</span></code>            Facebook fby35 BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qcom-dc-scm-v1-bmc</span></code>   Qualcomm DC-SCM V1 BMC</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qcom-firework-bmc</span></code>    Qualcomm Firework BMC</p></li>
</ul>
<section id="supported-devices">
<h2>Supported devices<a class="headerlink" href="#supported-devices" title="Permalink to this headline"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>SMP (for the AST2600 Cortex-A7)</p></li>
<li><p>Interrupt Controller (VIC)</p></li>
<li><p>Timer Controller</p></li>
<li><p>RTC Controller</p></li>
<li><p>I2C Controller, including the new register interface of the AST2600</p></li>
<li><p>System Control Unit (SCU)</p></li>
<li><p>SRAM mapping</p></li>
<li><p>X-DMA Controller (basic interface)</p></li>
<li><p>Static Memory Controller (SMC or FMC) - Only SPI Flash support</p></li>
<li><p>SPI Memory Controller</p></li>
<li><p>USB 2.0 Controller</p></li>
<li><p>SD/MMC storage controllers</p></li>
<li><p>SDRAM controller (dummy interface for basic settings and training)</p></li>
<li><p>Watchdog Controller</p></li>
<li><p>GPIO Controller (Master only)</p></li>
<li><p>UART</p></li>
<li><p>Ethernet controllers</p></li>
<li><p>Front LEDs (PCA9552 on I2C bus)</p></li>
<li><p>LPC Peripheral Controller (a subset of subdevices are supported)</p></li>
<li><p>Hash/Crypto Engine (HACE) - Hash support only. TODO: HMAC and RSA</p></li>
<li><p>ADC</p></li>
<li><p>Secure Boot Controller (AST2600)</p></li>
<li><p>eMMC Boot Controller (dummy)</p></li>
<li><p>PECI Controller (minimal)</p></li>
<li><p>I3C Controller</p></li>
<li><p>Internal Bridge Controller (SLI dummy)</p></li>
</ul>
</div></blockquote>
</section>
<section id="missing-devices">
<h2>Missing devices<a class="headerlink" href="#missing-devices" title="Permalink to this headline"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Coprocessor support</p></li>
<li><p>PWM and Fan Controller</p></li>
<li><p>Slave GPIO Controller</p></li>
<li><p>Super I/O Controller</p></li>
<li><p>PCI-Express 1 Controller</p></li>
<li><p>Graphic Display Controller</p></li>
<li><p>MCTP Controller</p></li>
<li><p>Mailbox Controller</p></li>
<li><p>Virtual UART</p></li>
<li><p>eSPI Controller</p></li>
</ul>
</div></blockquote>
</section>
<section id="boot-options">
<h2>Boot options<a class="headerlink" href="#boot-options" title="Permalink to this headline"></a></h2>
<p>The Aspeed machines can be started using the <code class="docutils literal notranslate"><span class="pre">-kernel</span></code> and <code class="docutils literal notranslate"><span class="pre">-dtb</span></code> options
to load a Linux kernel or from a firmware. Images can be downloaded from the
OpenBMC jenkins :</p>
<blockquote>
<div><p><a class="reference external" href="https://jenkins.openbmc.org/job/ci-openbmc/lastSuccessfulBuild/">https://jenkins.openbmc.org/job/ci-openbmc/lastSuccessfulBuild/</a></p>
</div></blockquote>
<p>or directly from the OpenBMC GitHub release repository :</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/openbmc/openbmc/releases">https://github.com/openbmc/openbmc/releases</a></p>
</div></blockquote>
<p>or directly from the ASPEED Forked OpenBMC GitHub release repository :</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/AspeedTech-BMC/openbmc/releases">https://github.com/AspeedTech-BMC/openbmc/releases</a></p>
</div></blockquote>
<section id="booting-from-a-kernel-image">
<h3>Booting from a kernel image<a class="headerlink" href="#booting-from-a-kernel-image" title="Permalink to this headline"></a></h3>
<p>To boot a kernel directly from a Linux build tree:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>qemu-system-arm<span class="w"> </span>-M<span class="w"> </span>ast2600-evb<span class="w"> </span>-nographic<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-kernel<span class="w"> </span>arch/arm/boot/zImage<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-dtb<span class="w"> </span>arch/arm/boot/dts/aspeed-ast2600-evb.dtb<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-initrd<span class="w"> </span>rootfs.cpio
</pre></div>
</div>
</section>
<section id="booting-from-a-flash-image">
<h3>Booting from a flash image<a class="headerlink" href="#booting-from-a-flash-image" title="Permalink to this headline"></a></h3>
<p>The machine options specific to Aspeed to boot from a flash image are :</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">execute-in-place</span></code> which emulates the boot from the CE0 flash
device by using the FMC controller to load the instructions, and
not simply from RAM. This takes a little longer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fmc-model</span></code> to change the default FMC Flash model. FW needs
support for the chip model to boot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">spi-model</span></code> to change the default SPI Flash model.</p></li>
</ul>
</div></blockquote>
<p>To boot the machine from the flash image, use an MTD drive :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>qemu-system-arm<span class="w"> </span>-M<span class="w"> </span>romulus-bmc<span class="w"> </span>-nic<span class="w"> </span>user<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span>obmc-phosphor-image-romulus.static.mtd,format<span class="o">=</span>raw,if<span class="o">=</span>mtd<span class="w"> </span>-nographic
</pre></div>
</div>
<p>To use other flash models, for instance a different FMC chip and a
bigger (64M) SPI for the <code class="docutils literal notranslate"><span class="pre">ast2500-evb</span></code> machine, run :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-M<span class="w"> </span>ast2500-evb,fmc-model<span class="o">=</span>mx25l25635e,spi-model<span class="o">=</span>mx66u51235f
</pre></div>
</div>
<p>When more flexibility is needed to define the flash devices, to use
different flash models or define all flash devices (up to 8), the
<code class="docutils literal notranslate"><span class="pre">-nodefaults</span></code> QEMU option can be used to avoid creating the default
flash devices.</p>
<p>Flash devices should then be created from the command line and attached
to a block device :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>qemu-system-arm<span class="w"> </span>-M<span class="w"> </span>ast2600-evb<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-blockdev<span class="w"> </span>node-name<span class="o">=</span>fmc0,driver<span class="o">=</span>file,filename<span class="o">=</span>/path/to/fmc0.img<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-device<span class="w"> </span>mx66u51235f,bus<span class="o">=</span>ssi.0,cs<span class="o">=</span>0x0,drive<span class="o">=</span>fmc0<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-blockdev<span class="w"> </span>node-name<span class="o">=</span>fmc1,driver<span class="o">=</span>file,filename<span class="o">=</span>/path/to/fmc1.img<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-device<span class="w"> </span>mx66u51235f,bus<span class="o">=</span>ssi.0,cs<span class="o">=</span>0x1,drive<span class="o">=</span>fmc1<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-blockdev<span class="w"> </span>node-name<span class="o">=</span>spi1,driver<span class="o">=</span>file,filename<span class="o">=</span>/path/to/spi1.img<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-device<span class="w"> </span>mx66u51235f,cs<span class="o">=</span>0x0,bus<span class="o">=</span>ssi.1,drive<span class="o">=</span>spi1<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-nographic<span class="w"> </span>-nodefaults
</pre></div>
</div>
<p>In that case, the machine boots fetching instructions from the FMC0
device. It is slower to start but closer to what HW does. Using the
machine option <code class="docutils literal notranslate"><span class="pre">execute-in-place</span></code> has a similar effect.</p>
</section>
<section id="booting-from-an-emmc-image">
<h3>Booting from an eMMC image<a class="headerlink" href="#booting-from-an-emmc-image" title="Permalink to this headline"></a></h3>
<p>The machine options specific to Aspeed machines to boot from an eMMC
image are :</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">boot-emmc</span></code> to set or unset boot from eMMC (AST2600).</p></li>
</ul>
</div></blockquote>
<p>Only the <code class="docutils literal notranslate"><span class="pre">ast2600-evb</span></code> and <code class="docutils literal notranslate"><span class="pre">rainier-emmc</span></code> machines have support to
boot from an eMMC device. In this case, the machine assumes that the
eMMC image includes special boot partitions. Such an image can be
built this way :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>mmc-bootarea.img<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M
$<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>u-boot-spl.bin<span class="w"> </span><span class="nv">of</span><span class="o">=</span>mmc-bootarea.img<span class="w"> </span><span class="nv">conv</span><span class="o">=</span>notrunc
$<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>u-boot.bin<span class="w"> </span><span class="nv">of</span><span class="o">=</span>mmc-bootarea.img<span class="w"> </span><span class="nv">conv</span><span class="o">=</span>notrunc<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1K
$<span class="w"> </span>cat<span class="w"> </span>mmc-bootarea.img<span class="w"> </span>obmc-phosphor-image.wic<span class="w"> </span>&gt;<span class="w"> </span>mmc.img
$<span class="w"> </span>truncate<span class="w"> </span>--size<span class="w"> </span>16GB<span class="w"> </span>mmc.img
</pre></div>
</div>
<p>Boot the machine <code class="docutils literal notranslate"><span class="pre">rainier-emmc</span></code> with :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>qemu-system-arm<span class="w"> </span>-M<span class="w"> </span>rainier-bmc<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span>mmc.img,format<span class="o">=</span>raw,if<span class="o">=</span>sd,index<span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-nographic
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">boot-emmc</span></code> option can be set or unset, to change the default
boot mode of machine: SPI or eMMC. This can be useful to boot the
<code class="docutils literal notranslate"><span class="pre">ast2600-evb</span></code> machine from an eMMC device (default being SPI) or to
boot the <code class="docutils literal notranslate"><span class="pre">rainier-bmc</span></code> machine from a flash device (default being
eMMC).</p>
<p>As an example, here is how to to boot the <code class="docutils literal notranslate"><span class="pre">rainier-bmc</span></code> machine from
the flash device with <code class="docutils literal notranslate"><span class="pre">boot-emmc=false</span></code> and let the machine use an
eMMC image :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>qemu-system-arm<span class="w"> </span>-M<span class="w"> </span>rainier-bmc,boot-emmc<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span>flash.img,format<span class="o">=</span>raw,if<span class="o">=</span>mtd<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span>mmc.img,format<span class="o">=</span>raw,if<span class="o">=</span>sd,index<span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-nographic
</pre></div>
</div>
<p>It should be noted that in this case the eMMC device must not have
boot partitions, otherwise the contents will not be accessible to the
machine.  This limitation is due to the use of the <code class="docutils literal notranslate"><span class="pre">-drive</span></code>
interface.</p>
<p>Ideally, one should be able to define the eMMC device and the
associated backend directly on the command line, such as :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-blockdev<span class="w"> </span>node-name<span class="o">=</span>emmc0,driver<span class="o">=</span>file,filename<span class="o">=</span>mmc.img<span class="w"> </span><span class="se">\</span>
-device<span class="w"> </span>emmc,bus<span class="o">=</span>sdhci-bus.2,drive<span class="o">=</span>emmc0,boot-partition-size<span class="o">=</span><span class="m">1048576</span>,boot-config<span class="o">=</span><span class="m">8</span>
</pre></div>
</div>
<p>This is not yet supported (as of QEMU-10.0). Work is needed to
refactor the sdhci bus model.</p>
</section>
<section id="other-booting-options">
<h3>Other booting options<a class="headerlink" href="#other-booting-options" title="Permalink to this headline"></a></h3>
<p>Other machine options specific to Aspeed machines are :</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bmc-console</span></code> to change the default console device. Most of the
machines use the <code class="docutils literal notranslate"><span class="pre">UART5</span></code> device for a boot console, which is
mapped on <code class="docutils literal notranslate"><span class="pre">/dev/ttyS4</span></code> under Linux, but it is not always the
case.</p></li>
</ul>
</div></blockquote>
<p>To change the boot console and use device <code class="docutils literal notranslate"><span class="pre">UART3</span></code> (<code class="docutils literal notranslate"><span class="pre">/dev/ttyS2</span></code>
under Linux), use :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-M<span class="w"> </span>ast2500-evb,bmc-console<span class="o">=</span>uart3
</pre></div>
</div>
</section>
</section>
</section>
<section id="aspeed-2700-family-boards-ast2700-evb">
<h1>Aspeed 2700 family boards (<code class="docutils literal notranslate"><span class="pre">ast2700-evb</span></code>)<a class="headerlink" href="#aspeed-2700-family-boards-ast2700-evb" title="Permalink to this headline"></a></h1>
<p>The QEMU Aspeed machines model BMCs of Aspeed evaluation boards.
They are based on different releases of the Aspeed SoC :
the AST2700 with quad cores ARM Cortex-A35 64 bits CPUs (1.6GHz).</p>
<p>The SoC comes with RAM, Gigabit ethernet, USB, SD/MMC, USB, SPI, I2C,
etc.</p>
<p>AST2700 SoC based machines :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ast2700-evb</span></code>          Aspeed AST2700 Evaluation board (Cortex-A35)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ast2700fc</span></code>            Aspeed AST2700 Evaluation board (Cortex-A35 + Cortex-M4)</p></li>
</ul>
<section id="id1">
<h2>Supported devices<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Interrupt Controller</p></li>
<li><p>Timer Controller</p></li>
<li><p>RTC Controller</p></li>
<li><p>I2C Controller</p></li>
<li><p>System Control Unit (SCU)</p></li>
<li><p>SRAM mapping</p></li>
<li><p>X-DMA Controller (basic interface)</p></li>
<li><p>Static Memory Controller (SMC or FMC) - Only SPI Flash support</p></li>
<li><p>SPI Memory Controller</p></li>
<li><p>USB 2.0 Controller</p></li>
<li><p>SD/MMC storage controllers</p></li>
<li><p>SDRAM controller (dummy interface for basic settings and training)</p></li>
<li><p>Watchdog Controller</p></li>
<li><p>GPIO Controller (Master only)</p></li>
<li><p>UART</p></li>
<li><p>Ethernet controllers</p></li>
<li><p>Front LEDs (PCA9552 on I2C bus)</p></li>
<li><p>LPC Peripheral Controller (a subset of subdevices are supported)</p></li>
<li><p>Hash/Crypto Engine (HACE) - Hash support only. TODO: Crypto</p></li>
<li><p>ADC</p></li>
<li><p>eMMC Boot Controller (dummy)</p></li>
<li><p>PECI Controller (minimal)</p></li>
<li><p>I3C Controller</p></li>
<li><p>Internal Bridge Controller (SLI dummy)</p></li>
</ul>
</div></blockquote>
</section>
<section id="id2">
<h2>Missing devices<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>PWM and Fan Controller</p></li>
<li><p>Slave GPIO Controller</p></li>
<li><p>Super I/O Controller</p></li>
<li><p>PCI-Express 1 Controller</p></li>
<li><p>Graphic Display Controller</p></li>
<li><p>MCTP Controller</p></li>
<li><p>Mailbox Controller</p></li>
<li><p>Virtual UART</p></li>
<li><p>eSPI Controller</p></li>
</ul>
</div></blockquote>
</section>
<section id="id3">
<h2>Boot options<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h2>
<p>Images can be downloaded from the ASPEED Forked OpenBMC GitHub release repository :</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/AspeedTech-BMC/openbmc/releases">https://github.com/AspeedTech-BMC/openbmc/releases</a></p>
</div></blockquote>
<section id="booting-the-ast2700-evb-machine">
<h3>Booting the ast2700-evb machine<a class="headerlink" href="#booting-the-ast2700-evb-machine" title="Permalink to this headline"></a></h3>
<p>Boot the AST2700 machine from the flash image.</p>
<p>There are two supported methods for booting the AST2700 machine with a flash image:</p>
<p>Manual boot using <code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">loader</span></code>:</p>
<p>It causes all 4 CPU cores to start execution from address <code class="docutils literal notranslate"><span class="pre">0x430000000</span></code>, which
corresponds to the BL31 image load address.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">IMGDIR</span><span class="o">=</span>ast2700-default
<span class="nv">UBOOT_SIZE</span><span class="o">=</span><span class="k">$(</span>stat<span class="w"> </span>--format<span class="o">=</span>%s<span class="w"> </span>-L<span class="w"> </span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/u-boot-nodtb.bin<span class="k">)</span>

$<span class="w"> </span>qemu-system-aarch64<span class="w"> </span>-M<span class="w"> </span>ast2700-evb<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,force-raw<span class="o">=</span>on,addr<span class="o">=</span>0x400000000,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/u-boot-nodtb.bin<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,force-raw<span class="o">=</span>on,addr<span class="o">=</span><span class="k">$((</span><span class="m">0x400000000</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="si">${</span><span class="nv">UBOOT_SIZE</span><span class="si">}</span><span class="k">))</span>,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/u-boot.dtb<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,force-raw<span class="o">=</span>on,addr<span class="o">=</span>0x430000000,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/bl31.bin<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,force-raw<span class="o">=</span>on,addr<span class="o">=</span>0x430080000,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/optee/tee-raw.bin<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,cpu-num<span class="o">=</span><span class="m">0</span>,addr<span class="o">=</span>0x430000000<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,cpu-num<span class="o">=</span><span class="m">1</span>,addr<span class="o">=</span>0x430000000<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,cpu-num<span class="o">=</span><span class="m">2</span>,addr<span class="o">=</span>0x430000000<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,cpu-num<span class="o">=</span><span class="m">3</span>,addr<span class="o">=</span>0x430000000<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-smp<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/image-bmc,format<span class="o">=</span>raw,if<span class="o">=</span>mtd<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-nographic
</pre></div>
</div>
<p>Boot using a virtual boot ROM (<code class="docutils literal notranslate"><span class="pre">-bios</span></code>):</p>
<p>If users do not specify the <code class="docutils literal notranslate"><span class="pre">-bios</span> <span class="pre">option</span></code>, QEMU will attempt to load the
default vbootrom image <code class="docutils literal notranslate"><span class="pre">ast27x0_bootrom.bin</span></code> from either the current working
directory or the <code class="docutils literal notranslate"><span class="pre">pc-bios</span></code> directory within the QEMU source tree.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>qemu-system-aarch64<span class="w"> </span>-M<span class="w"> </span>ast2700-evb<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span>image-bmc,format<span class="o">=</span>raw,if<span class="o">=</span>mtd<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-nographic
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-bios</span></code> option allows users to specify a custom path for the vbootrom
image to be loaded during boot. This will load the vbootrom image from the
specified path in the ${HOME} directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-bios<span class="w"> </span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/ast27x0_bootrom.bin
</pre></div>
</div>
</section>
<section id="booting-the-ast2700fc-machine">
<h3>Booting the ast2700fc machine<a class="headerlink" href="#booting-the-ast2700fc-machine" title="Permalink to this headline"></a></h3>
<p>AST2700 features four Cortex-A35 primary processors and two Cortex-M4 coprocessors.
<strong>ast2700-evb</strong> machine focuses on emulating the four Cortex-A35 primary processors,
<strong>ast2700fc</strong> machine extends <strong>ast2700-evb</strong> by adding support for the two Cortex-M4 coprocessors.</p>
<p>Steps to boot the AST2700fc machine:</p>
<ol class="arabic simple">
<li><p>Ensure you have the following AST2700A1 binaries available in a directory</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>u-boot-nodtb.bin</p></li>
<li><p>u-boot.dtb</p></li>
<li><p>bl31.bin</p></li>
<li><p>optee/tee-raw.bin</p></li>
<li><p>image-bmc</p></li>
<li><p>zephyr-aspeed-ssp.elf (for SSP firmware, CPU 5)</p></li>
<li><p>zephyr-aspeed-tsp.elf (for TSP firmware, CPU 6)</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Execute the following command to start <code class="docutils literal notranslate"><span class="pre">ast2700fc</span></code> machine:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">IMGDIR</span><span class="o">=</span>ast2700-default
<span class="nv">UBOOT_SIZE</span><span class="o">=</span><span class="k">$(</span>stat<span class="w"> </span>--format<span class="o">=</span>%s<span class="w"> </span>-L<span class="w"> </span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/u-boot-nodtb.bin<span class="k">)</span>

$<span class="w"> </span>qemu-system-aarch64<span class="w"> </span>-M<span class="w"> </span>ast2700fc<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,force-raw<span class="o">=</span>on,addr<span class="o">=</span>0x400000000,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/u-boot-nodtb.bin<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,force-raw<span class="o">=</span>on,addr<span class="o">=</span><span class="k">$((</span><span class="m">0x400000000</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="si">${</span><span class="nv">UBOOT_SIZE</span><span class="si">}</span><span class="k">))</span>,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/u-boot.dtb<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,force-raw<span class="o">=</span>on,addr<span class="o">=</span>0x430000000,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/bl31.bin<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,force-raw<span class="o">=</span>on,addr<span class="o">=</span>0x430080000,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/optee/tee-raw.bin<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,cpu-num<span class="o">=</span><span class="m">0</span>,addr<span class="o">=</span>0x430000000<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,cpu-num<span class="o">=</span><span class="m">1</span>,addr<span class="o">=</span>0x430000000<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,cpu-num<span class="o">=</span><span class="m">2</span>,addr<span class="o">=</span>0x430000000<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,cpu-num<span class="o">=</span><span class="m">3</span>,addr<span class="o">=</span>0x430000000<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-drive<span class="w"> </span><span class="nv">file</span><span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/image-bmc,if<span class="o">=</span>mtd,format<span class="o">=</span>raw<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/zephyr-aspeed-ssp.elf,cpu-num<span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-device<span class="w"> </span>loader,file<span class="o">=</span><span class="si">${</span><span class="nv">IMGDIR</span><span class="si">}</span>/zephyr-aspeed-tsp.elf,cpu-num<span class="o">=</span><span class="m">5</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-serial<span class="w"> </span>pty<span class="w"> </span>-serial<span class="w"> </span>pty<span class="w"> </span>-serial<span class="w"> </span>pty<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-snapshot<span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-S<span class="w"> </span>-nographic
</pre></div>
</div>
<p>After launching QEMU, serial devices will be automatically redirected.
Example output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>char<span class="w"> </span>device<span class="w"> </span>redirected<span class="w"> </span>to<span class="w"> </span>/dev/pts/55<span class="w"> </span><span class="o">(</span>label<span class="w"> </span>serial0<span class="o">)</span>
char<span class="w"> </span>device<span class="w"> </span>redirected<span class="w"> </span>to<span class="w"> </span>/dev/pts/56<span class="w"> </span><span class="o">(</span>label<span class="w"> </span>serial1<span class="o">)</span>
char<span class="w"> </span>device<span class="w"> </span>redirected<span class="w"> </span>to<span class="w"> </span>/dev/pts/57<span class="w"> </span><span class="o">(</span>label<span class="w"> </span>serial2<span class="o">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>serial0: Console for the four Cortex-A35 primary processors.</p></li>
<li><p>serial1 and serial2: Consoles for the two Cortex-M4 coprocessors.</p></li>
</ul>
<p>Use <code class="docutils literal notranslate"><span class="pre">tio</span></code> or another terminal emulator to connect to the consoles:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>tio<span class="w"> </span>/dev/pts/55
$<span class="w"> </span>tio<span class="w"> </span>/dev/pts/56
$<span class="w"> </span>tio<span class="w"> </span>/dev/pts/57
</pre></div>
</div>
</section>
</section>
</section>
<section id="aspeed-minibmc-family-boards-ast1030-evb">
<h1>Aspeed minibmc family boards (<code class="docutils literal notranslate"><span class="pre">ast1030-evb</span></code>)<a class="headerlink" href="#aspeed-minibmc-family-boards-ast1030-evb" title="Permalink to this headline"></a></h1>
<p>The QEMU Aspeed machines model mini BMCs of various Aspeed evaluation
boards. They are based on different releases of the
Aspeed SoC : the AST1030 integrating an ARM Cortex M4F CPU (200MHz).</p>
<p>The SoC comes with SRAM, SPI, I2C, etc.</p>
<p>AST1030 SoC based machines :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ast1030-evb</span></code>          Aspeed AST1030 Evaluation board (Cortex-M4F)</p></li>
</ul>
<section id="id4">
<h2>Supported devices<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>SMP (for the AST1030 Cortex-M4F)</p></li>
<li><p>Interrupt Controller (VIC)</p></li>
<li><p>Timer Controller</p></li>
<li><p>I2C Controller</p></li>
<li><p>System Control Unit (SCU)</p></li>
<li><p>SRAM mapping</p></li>
<li><p>Static Memory Controller (SMC or FMC) - Only SPI Flash support</p></li>
<li><p>SPI Memory Controller</p></li>
<li><p>USB 2.0 Controller</p></li>
<li><p>Watchdog Controller</p></li>
<li><p>GPIO Controller (Master only)</p></li>
<li><p>UART</p></li>
<li><p>LPC Peripheral Controller (a subset of subdevices are supported)</p></li>
<li><p>Hash/Crypto Engine (HACE) - Hash support only. TODO: HMAC and RSA</p></li>
<li><p>ADC</p></li>
<li><p>Secure Boot Controller</p></li>
<li><p>PECI Controller (minimal)</p></li>
</ul>
</div></blockquote>
</section>
<section id="id5">
<h2>Missing devices<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>PWM and Fan Controller</p></li>
<li><p>Slave GPIO Controller</p></li>
<li><p>Mailbox Controller</p></li>
<li><p>Virtual UART</p></li>
<li><p>eSPI Controller</p></li>
<li><p>I3C Controller</p></li>
</ul>
</div></blockquote>
</section>
<section id="id6">
<h2>Boot options<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h2>
<p>The Aspeed machines can be started using the <code class="docutils literal notranslate"><span class="pre">-kernel</span></code> to load a
Zephyr OS or from a firmware. Images can be downloaded from the
ASPEED GitHub release repository :</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/AspeedTech-BMC/zephyr/releases">https://github.com/AspeedTech-BMC/zephyr/releases</a></p>
</div></blockquote>
<p>To boot a kernel directly from a Zephyr build tree:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>qemu-system-arm<span class="w"> </span>-M<span class="w"> </span>ast1030-evb<span class="w"> </span>-nographic<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-kernel<span class="w"> </span>zephyr.elf
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="vexpress.html" class="btn btn-neutral float-left" title="Arm Versatile Express boards (vexpress-a9, vexpress-a15)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bananapi_m2u.html" class="btn btn-neutral float-right" title="Banana Pi BPI-M2U (bpim2u)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The QEMU Project Developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<!-- Empty para to force a blank line after "Built with Sphinx ..." -->
<p></p>

<p>This documentation is for QEMU version 10.0.50.</p>


<p><a href="../../about/license.html">QEMU and this manual are released under the
GNU General Public License, version 2.</a></p>

 


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>